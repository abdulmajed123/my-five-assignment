<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Service Call Example</title>
    <style>
      #coin-counter {
        font-weight: bold;
        margin-bottom: 20px;
      }
      #history div {
        border: 1px solid #ccc;
        margin: 5px 0;
        padding: 5px;
      }
      .card {
        border: 1px solid #000;
        padding: 10px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div id="coin-counter">Coins: <span id="coins">100</span></div>

    <div id="main-div">
      <div class="card">
        <h3 class="title">Fire Service</h3>
        <p class="para">Call in case of fire</p>
        <button class="use-btn" data-number="101">Call</button>
      </div>
      <div class="card">
        <h3 class="title">Police Service</h3>
        <p class="para">Call in case of emergency</p>
        <button class="use-btn" data-number="102">Call</button>
      </div>
    </div>

    <div id="history">
      <h2>Call History:</h2>
    </div>

    <script>
      const coinsSpan = document.getElementById("coins");
      let coins = parseInt(coinsSpan.textContent);

      document.querySelectorAll("#main-div .use-btn").forEach((button) => {
        button.addEventListener("click", function () {
          if (coins < 20) {
            alert("You don't have enough coins!");
            return;
          }

          coins -= 20;
          coinsSpan.textContent = coins;

          const card = this.parentElement;
          const title = card.querySelector(".title").textContent;
          const number = this.getAttribute("data-number"); // service number
          const para = card.querySelector(".para").textContent;
          const time = new Date().toLocaleTimeString();

          // Show alert with service name and number
          alert(`Calling ${title} at number ${number}`);

          // Add to Call History
          const historyDiv = document.createElement("div");
          historyDiv.innerHTML = `<strong>Service:</strong> ${title}<br>
                            <strong>Number:</strong> ${number}<br>
                            <small>Time: ${time}</small>`;
          document.getElementById("history").appendChild(historyDiv);
        });
      });
    </script>
  </body>
</html>
